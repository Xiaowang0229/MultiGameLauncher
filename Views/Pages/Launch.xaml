<Page x:Class="MultiGameLauncher.Views.Pages.Launch"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:MultiGameLauncher.Views.Pages"
      xmlns:ui="http://metro.mahapps.com/winfx/xaml/controls" xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
      xmlns:pi="http://schemas.modernwpf.com/2019"
      mc:Ignorable="d" 

      Title="Launch" Width="1200" Height="675" Loaded="Page_Loaded">

    <Grid>
        <Grid.Resources>

            <Style TargetType="TabItem">
                <Setter Property="Padding" Value="0"/>
                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                <Setter Property="VerticalContentAlignment" Value="Stretch"/>
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="TabItem">
                            <Border x:Name="Capsule"
                                    
                                Width="20"
                                Height="20"
                                CornerRadius="10"
                                Background="Gray"
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                ToolTip="{TemplateBinding Header}">

                                <!-- 关键：VisualStateManager 直接放在 Border 上 -->
                                <VisualStateManager.VisualStateGroups>
                                    <!-- WPF TabItem 内置识别这个组名 -->
                                    <VisualStateGroup x:Name="SelectionStates">

                                        <!-- 未选中状态（默认） -->
                                        <VisualState x:Name="Unselected">
                                            <Storyboard>
                                                <DoubleAnimation Storyboard.TargetProperty="Width"
                                                             To="20"
                                                             Duration="0:0:0.3">
                                                    <DoubleAnimation.EasingFunction>
                                                        <CubicEase EasingMode="EaseOut"/>
                                                    </DoubleAnimation.EasingFunction>
                                                </DoubleAnimation>
                                                <ColorAnimation Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                            To="#FF808080" 
                                                    Duration="0:0:0.3">
                                                    <ColorAnimation.EasingFunction>
                                                        <CubicEase EasingMode="EaseOut"/>
                                                    </ColorAnimation.EasingFunction>
                                                </ColorAnimation>
                                            </Storyboard>
                                        </VisualState>

                                        <!-- 选中状态 -->
                                        <VisualState x:Name="Selected">
                                            <Storyboard>
                                                <DoubleAnimation Storyboard.TargetProperty="Width"
                                                             To="50"
                                                             Duration="0:0:0.3">
                                                    <DoubleAnimation.EasingFunction>
                                                        <CubicEase EasingMode="EaseOut"/>
                                                    </DoubleAnimation.EasingFunction>
                                                </DoubleAnimation>
                                                <ColorAnimation Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                            To="{DynamicResource MahApps.Colors.Accent}"
                                                            Duration="0:0:0.3">
                                                    <ColorAnimation.EasingFunction>
                                                        <CubicEase EasingMode="EaseOut"/>
                                                    </ColorAnimation.EasingFunction>
                                                </ColorAnimation>
                                            </Storyboard>
                                        </VisualState>

                                    </VisualStateGroup>
                                </VisualStateManager.VisualStateGroups>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </Grid.Resources>
        <Image HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
        <MediaElement x:Name="BackgroundVideo"
            LoadedBehavior="Play"
                      Stretch="UniformToFill"
                      IsMuted="True"
                      UnloadedBehavior="Close"
                      MediaEnded="BackgroundVideo_MediaEnded" />

            <ui:MetroTabControl x:Name="RootTabControl" Margin="0,0,0,650" VerticalAlignment="Center" HorizontalAlignment="Center" SelectionChanged="RootChganger_SelectionChanged">
            
        </ui:MetroTabControl>

        <Grid>
            <StackPanel Background="{DynamicResource MahApps.Brushes.Accent}" Orientation="Horizontal" HorizontalAlignment="Right" Width="1200" Margin="0,580,0,0" >
                <Border Margin="10,10,10,10"
                        Height="64"
                        Width="64"
                        BorderBrush="Black" 
                        BorderThickness="3"  
                        CornerRadius="0"
                        ClipToBounds="True" Background="White"
                        >
                    <Image Width="64" Height="64" x:Name="UserHead" HorizontalAlignment="Center" VerticalAlignment="Center" MouseLeftButtonDown="UserHead_MouseLeftButtonDown" />
                </Border>

                <Label x:Name="Welcome" FontSize="22" Content="你好，用户！" VerticalAlignment="Center" FontWeight="Bold"/>
            </StackPanel>






            <ui:Tile Title="终止进程" ui:ControlsHelper.MouseOverBorderBrush="{DynamicResource MahApps.Brushes.ThemeForeground}" Background="#FFC83E3E" HorizontalTitleAlignment="Right" Height="95" Width="250" Margin="950,580,0,0" Click="Stop_Click" Visibility="Hidden">
                <iconPacks:PackIconModern Width="40" Height="40" Kind="Stop" />
            </ui:Tile>
            <ui:Tile x:Name="LaunchTile" Title="启动游戏" ui:ControlsHelper.MouseOverBorderBrush="{DynamicResource MahApps.Brushes.ThemeForeground}" Background="Green" HorizontalTitleAlignment="Right" Height="95" Width="250" Margin="950,580,0,0" Click="LaunchTile_Click">
                <StackPanel>
                    <iconPacks:PackIconModern Width="40" Height="40" Kind="ControlPlay" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="0,0,0,5"/>
                    <TextBlock Text="当前游戏："/>
                </StackPanel>
            </ui:Tile>
            <StackPanel x:Name="sp_ani">
                <StackPanel Tag="ani" Orientation="Horizontal" Height="118"  >
                    <Label   Content="主标题" VerticalAlignment="Top" FontSize="60" FontWeight="Bold" Margin="40,40,0,0" Height="81"/>

                </StackPanel>
                <StackPanel Tag="ani" Orientation="Horizontal" >
                    <Label HorizontalAlignment="Left"  Content="副标题" VerticalAlignment="Top" FontSize="22" Margin="40,0,0,0" Height="38" />
                </StackPanel>
                <StackPanel Margin="0,140,0,0">

                </StackPanel>
                <StackPanel Orientation="Horizontal"  Tag="ani">

                    <StackPanel Margin="5,0,0,0" Tag="ani">

                        <StackPanel  Orientation="Horizontal"  Margin="0,0,0,0">
                            <ui:Tile x:Name="SettingsTile" Title="设置"
                Margin="3,3,0,0"
                ui:ControlsHelper.MouseOverBorderBrush="{DynamicResource MahApps.Brushes.ThemeForeground}"
                Background="{DynamicResource MahApps.Brushes.DataGrid.Selection.BorderBrush}"
                HorizontalTitleAlignment="Right" Click="SettingsTile_Click" Width="120" Height="120">
                                <iconPacks:PackIconModern Width="40"
                    Height="40"
                    Kind="Settings" />
                            </ui:Tile>
                            <ui:Tile x:Name="UserTile" Title="个性化"
                Margin="10,3,3,0"
                ui:ControlsHelper.MouseOverBorderBrush="{DynamicResource MahApps.Brushes.ThemeForeground}"
                Background="{DynamicResource MahApps.Brushes.SystemControlRevealFocusVisual}"
                HorizontalTitleAlignment="Right" Click="UserTile_Click" Width="120" Height="120">
                                <iconPacks:PackIconModern Width="40"
                    Height="40"
                    Kind="User" />
                            </ui:Tile>
                        </StackPanel>
                        <StackPanel Margin="0,10,0,0">
                            <ui:Tile x:Name="AboutTile" Title="关于"
                Margin="3,0,3,3"
                ui:ControlsHelper.MouseOverBorderBrush="{DynamicResource MahApps.Brushes.ThemeForeground}"
                Background="{DynamicResource MahApps.Brushes.AccentBase}"
                HorizontalTitleAlignment="Right" Width="250" Click="AboutTile_Click" Height="120">
                                <iconPacks:PackIconModern Width="40"
                    Height="40"
                    Kind="InformationCircle" />
                            </ui:Tile>
                        </StackPanel>
                    </StackPanel>


                    <StackPanel Tag="ani" Margin="5,0,5,0">
                        <ui:Tile x:Name="ManageTile" Title="游戏管理"
                ui:ControlsHelper.MouseOverBorderBrush="{DynamicResource MahApps.Brushes.ThemeForeground}"
                Background="{DynamicResource MahApps.Brushes.CheckmarkFill}"
                HorizontalTitleAlignment="Right" Height="250" Width="250" Click="ManageTile_Click">
                            <iconPacks:PackIconModern Width="80"
                    Height="80"
                    Kind="ListAdd" />
                        </ui:Tile>
                    </StackPanel>

                    <StackPanel Tag="ani">
                        <ui:Tile x:Name="UpdateTile" Title="更新"
                Margin="3"
                ui:ControlsHelper.MouseOverBorderBrush="{DynamicResource MahApps.Brushes.ThemeForeground}"
                Background="{DynamicResource MahApps.Brushes.Highlight}"
                HorizontalTitleAlignment="Right" Height="250" Width="250" Click="UpdateTile_Click">
                            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Height="209" Width="230">
                                <TextBlock Text="版本日志：" FontSize="20" FontWeight="Bold"/>
                                <FlowDocumentScrollViewer x:Name="LogText" Height="167" Width="220"/>
                            </StackPanel>
                        </ui:Tile>
                    </StackPanel>



                </StackPanel>

            </StackPanel>

        </Grid>
    </Grid>
</Page>
